# FROM quay.io/toolbx/ubuntu-toolbox:22.04
FROM quay.io/toolbx/ubuntu-toolbox:23.10

COPY ./extra-packages /
RUN apt-get update && \
    apt-get install -y $(cat /extra-packages | xargs) && \
    rm -rd /var/lib/apt/lists/*

RUN rm /extra-packages

# fix bat program name
RUN ln -s /usr/bin/batcat /usr/bin/bat

# install newer zoxide manually (repo package is ancient)
RUN curl -sSL -o /tmp/zoxide.deb https://github.com/ajeetdsouza/zoxide/releases/download/v0.9.4/zoxide_0.9.4-1_amd64.deb && \
    apt-get install /tmp/zoxide.deb -y 

# pre set distrobox host links
RUN ln -s /usr/bin/distrobox-host-exec /usr/local/bin/firefox && \
    ln -s /usr/bin/distrobox-host-exec /usr/local/bin/systemctl && \
    ln -s /usr/bin/distrobox-host-exec /usr/local/bin/xdg-open && \
    ln -s /usr/bin/distrobox-host-exec /usr/local/bin/journalctl && \
    ln -s /usr/bin/distrobox-host-exec /usr/local/bin/podman && \
    ln -s /usr/bin/distrobox-host-exec /usr/local/bin/flatpak
